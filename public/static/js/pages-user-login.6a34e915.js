(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"0b83":function(t,n,i){var e=i("0c36");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=i("4f06").default;o("850357b8",e,!0,{sourceMap:!1,shadowMode:!1})},"0c36":function(t,n,i){n=t.exports=i("2350")(!1),n.push([t.i,".iconfont[data-v-51ba0ad3]{color:#00355f}.imgs[data-v-51ba0ad3]{width:60%;height:60%}.todo[data-v-51ba0ad3]{width:100%;height:100%;background:#ffdcf7}.todo .lo_hd[data-v-51ba0ad3]{text-align:center;padding-top:%?200?%}.todo .login[data-v-51ba0ad3]{background:#a990cc;color:#00355f}.todo .inputs[data-v-51ba0ad3]{margin:%?30?% %?60?%;margin-top:%?50?%;border-bottom:%?1?% solid #00355f;color:#00355f;padding-bottom:%?20?%}.todo .lo_btn[data-v-51ba0ad3]{margin:%?30?% %?60?%;margin-top:%?70?%}.todo .lo_text[data-v-51ba0ad3]{font-size:%?30?%;display:inline-block;line-height:%?80?%}.todo .input_end[data-v-51ba0ad3]{display:inline-block;line-height:%?80?%;height:%?80?%;vertical-align:top;padding-left:%?20?%}.oauth-row[data-v-51ba0ad3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-51ba0ad3]{width:%?100?%;height:%?100?%;border-radius:%?100?%;margin:0 %?40?%;border:1px solid #00355f;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#477497}.action-row[data-v-51ba0ad3]{display:-webkit-box;display:-webkit-flex;display:flex;margin:0 %?40?%;color:#00355f;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}",""])},"134f":function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,i("c5f6");var e={props:{type:String,color:String,size:{type:[Number,String],default:24}},computed:{fontSize:function(){var t=Number(this.size);return t=isNaN(t)?24:t,"".concat(t,"px")}},methods:{onClick:function(){this.$emit("click")}}};n.default=e},"499a":function(t,n,i){"use strict";i.r(n);var e=i("7d7e"),o=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(n,t,function(){return e[t]})}(a);n["default"]=o.a},"4bcb":function(t,n,i){"use strict";i.r(n);var e=i("134f"),o=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(n,t,function(){return e[t]})}(a);n["default"]=o.a},"576d":function(t,n,i){"use strict";i.r(n);var e=i("f7a0"),o=i("499a");for(var a in o)"default"!==a&&function(t){i.d(n,t,function(){return o[t]})}(a);i("b60b");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],e["b"],e["c"],!1,null,"51ba0ad3",null,!1,e["a"],r);n["default"]=c.exports},"7d7e":function(t,n,i){"use strict";var e=i("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e(i("f499")),a=e(i("cebc")),r=e(i("a3b8")),s=e(i("edb8")),c=i("2f62"),u={components:{Icon:r.default},data:function(){return{providerList:[],hasProvider:!0,account:"",password:"",positionTop:0}},computed:(0,c.mapState)(["forcedLogin"]),methods:(0,a.default)({},(0,c.mapMutations)(["login","addCity"]),{initProvider:function(){var t=this,n=["weixin","qq","sinaweibo"];uni.getProvider({service:"oauth",success:function(i){if(i.provider&&i.provider.length){for(var e=0;e<i.provider.length;e++)~n.indexOf(i.provider[e])&&t.providerList.push({value:i.provider[e],image:"/static/img/"+i.provider[e]+".png"});t.hasProvider=!0}},fail:function(t){console.error("获取服务供应商失败："+(0,o.default)(t))}})},initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},bindLogin:function(){if(this.account.length<5)uni.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)uni.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t={account:this.account,password:this.password},n=s.default.getUsers().some(function(n){return t.account===n.account&&t.password===n.password});n?this.toMain(this.account):uni.showToast({icon:"none",title:"用户账号或密码不正确"})}},oauth:function(t){var n=this;uni.login({provider:t,success:function(i){uni.getUserInfo({provider:t,success:function(t){n.toMain(t.userInfo.nickName),"undefined"!=typeof t.userInfo.status?n.addCity(t.userInfo.status.annotations[0].place.title):n.addCity(t.userInfo.city)}})},fail:function(t){console.error("授权登录失败："+(0,o.default)(t))}})},toMain:function(t){this.login(t),this.forcedLogin?uni.reLaunch({url:"../main/main"}):uni.navigateBack()}}),onReady:function(){this.initPosition(),this.initProvider()}};n.default=u},a20b:function(t,n,i){var e=i("cb5d");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=i("4f06").default;o("3d6cefa1",e,!0,{sourceMap:!1,shadowMode:!1})},a3b8:function(t,n,i){"use strict";i.r(n);var e=i("d02e"),o=i("4bcb");for(var a in o)"default"!==a&&function(t){i.d(n,t,function(){return o[t]})}(a);i("c94e");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],e["b"],e["c"],!1,null,"67e00e7f",null,!1,e["a"],r);n["default"]=c.exports},b60b:function(t,n,i){"use strict";var e=i("0b83"),o=i.n(e);o.a},c94e:function(t,n,i){"use strict";var e=i("a20b"),o=i.n(e);o.a},cb5d:function(t,n,i){n=t.exports=i("2350")(!1),n.push([t.i,'@font-face{font-family:iconfont;\n  /* project id 1278045 */src:url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.eot);src:url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.eot#iefix) format("embedded-opentype"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.woff2) format("woff2"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.woff) format("woff"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.ttf) format("truetype"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.svg#iconfont) format("svg")}.iconfont[data-v-67e00e7f]{font-family:iconfont!important;font-size:16px;font-style:normal;display:inline-block;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}',""])},d02e:function(t,n,i){"use strict";var e,o=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-rich-text",{staticClass:"iconfont",style:{color:t.color,"font-size":t.fontSize},attrs:{nodes:t.type},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.onClick()}}})},a=[];i.d(n,"b",function(){return o}),i.d(n,"c",function(){return a}),i.d(n,"a",function(){return e})},edb8:function(t,n,i){"use strict";var e=i("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e(i("f499")),a="USERS_KEY",r=function(){var t="";return t=uni.getStorageSync(a),t||(t="[]"),JSON.parse(t)},s=function(t){var n=r();n.push({account:t.account,password:t.password}),uni.setStorageSync(a,(0,o.default)(n))},c={getUsers:r,addUser:s};n.default=c},f7a0:function(t,n,i){"use strict";var e,o=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"todo"},[i("v-uni-view",{staticClass:"lo_hd"},[i("Icon",{attrs:{type:"&#xe74d;",size:"50",color:"#00355f"}})],1),i("v-uni-view",{staticClass:"inputs"},[i("v-uni-text",{staticClass:"lo_text"},[t._v("ID号:")]),i("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",placeholder:"请输入账号"},model:{value:t.account,callback:function(n){t.account=n},expression:"account"}})],1),i("v-uni-view",{staticClass:"inputs"},[i("v-uni-text",{staticClass:"lo_text"},[t._v("密码:")]),i("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}})],1),i("v-uni-view",{staticClass:"lo_btn"},[i("v-uni-button",{staticClass:"login",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.bindLogin.apply(void 0,arguments)}}},[t._v("登录")])],1),i("v-uni-view",{staticClass:"action-row"},[i("v-uni-navigator",{attrs:{url:"/pages/user/reg"}},[t._v("注册账号")]),i("v-uni-navigator",{attrs:{url:"/pages/user/pwd"}},[t._v("忘记密码")])],1),t.hasProvider?i("v-uni-view",{staticClass:"oauth-row",style:{top:t.positionTop+"px"}},t._l(t.providerList,function(n){return i("v-uni-view",{key:n.value,staticClass:"oauth-image"},[i("v-uni-image",{staticClass:"imgs",attrs:{src:n.image},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.oauth(n.value)}}})],1)}),1):t._e()],1)},a=[];i.d(n,"b",function(){return o}),i.d(n,"c",function(){return a}),i.d(n,"a",function(){return e})}}]);