(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"0170":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,'@font-face{font-family:iconfont;\n  /* project id 1278045 */src:url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.eot);src:url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.eot#iefix) format("embedded-opentype"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.woff2) format("woff2"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.woff) format("woff"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.ttf) format("truetype"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.svg#iconfont) format("svg")}.iconfont[data-v-7649ce2c]{font-family:iconfont!important;font-size:16px;font-style:normal;display:inline-block;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}',""])},"3ac2":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,".iconfont[data-v-e89fe4ba]{color:#00355f}.imgs[data-v-e89fe4ba]{width:60%;height:60%}.todo[data-v-e89fe4ba]{width:100%;height:100%;background:#ffdcf7}.todo .lo_hd[data-v-e89fe4ba]{text-align:center;padding-top:%?200?%}.todo .login[data-v-e89fe4ba]{background:#a990cc;color:#00355f}.todo .inputs[data-v-e89fe4ba]{margin:%?30?% %?60?%;margin-top:%?50?%;border-bottom:%?1?% solid #00355f;color:#00355f;padding-bottom:%?20?%}.todo .lo_btn[data-v-e89fe4ba]{margin:%?30?% %?60?%;margin-top:%?70?%}.todo .lo_text[data-v-e89fe4ba]{font-size:%?30?%;display:inline-block;line-height:%?80?%}.todo .input_end[data-v-e89fe4ba]{display:inline-block;line-height:%?80?%;height:%?80?%;vertical-align:top;padding-left:%?20?%}.oauth-row[data-v-e89fe4ba]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-e89fe4ba]{width:%?100?%;height:%?100?%;border-radius:%?100?%;margin:0 %?40?%;border:1px solid #00355f;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#477497}.action-row[data-v-e89fe4ba]{display:-webkit-box;display:-webkit-flex;display:flex;margin:0 %?40?%;color:#00355f;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}",""])},"404b":function(t,n,e){"use strict";var i=e("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("f499")),a=i(e("cebc")),r=i(e("ffad")),s=i(e("6192")),c=e("2f62"),u={components:{Icon:r.default},data:function(){return{providerList:[],hasProvider:!0,account:"",password:"",positionTop:0}},computed:(0,c.mapState)(["forcedLogin"]),methods:(0,a.default)({},(0,c.mapMutations)(["login","addCity"]),{initProvider:function(){var t=this,n=["weixin","qq","sinaweibo"];uni.getProvider({service:"oauth",success:function(e){if(e.provider&&e.provider.length){for(var i=0;i<e.provider.length;i++)~n.indexOf(e.provider[i])&&t.providerList.push({value:e.provider[i],image:"/static/img/"+e.provider[i]+".png"});t.hasProvider=!0}},fail:function(t){console.error("获取服务供应商失败："+(0,o.default)(t))}})},initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},bindLogin:function(){if(this.account.length<5)uni.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)uni.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t={account:this.account,password:this.password},n=s.default.getUsers().some(function(n){return t.account===n.account&&t.password===n.password});n?this.toMain(this.account):uni.showToast({icon:"none",title:"用户账号或密码不正确"})}},oauth:function(t){var n=this;uni.login({provider:t,success:function(e){uni.getUserInfo({provider:t,success:function(t){n.toMain(t.userInfo.nickName),"undefined"!=typeof t.userInfo.status?n.addCity(t.userInfo.status.annotations[0].place.title):n.addCity(t.userInfo.city)}})},fail:function(t){console.error("授权登录失败："+(0,o.default)(t))}})},toMain:function(t){this.login(t),this.forcedLogin?uni.reLaunch({url:"../main/main"}):uni.navigateBack()}}),onReady:function(){this.initPosition(),this.initProvider()}};n.default=u},"4b2a":function(t,n,e){"use strict";e.r(n);var i=e("404b"),o=e.n(i);for(var a in i)"default"!==a&&function(t){e.d(n,t,function(){return i[t]})}(a);n["default"]=o.a},6192:function(t,n,e){"use strict";var i=e("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("f499")),a="USERS_KEY",r=function(){var t="";return t=uni.getStorageSync(a),t||(t="[]"),JSON.parse(t)},s=function(t){var n=r();n.push({account:t.account,password:t.password}),uni.setStorageSync(a,(0,o.default)(n))},c={getUsers:r,addUser:s};n.default=c},"6c75":function(t,n,e){"use strict";var i,o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"todo"},[e("v-uni-view",{staticClass:"lo_hd"},[e("Icon",{attrs:{type:"&#xe74d;",size:"50",color:"#00355f"}})],1),e("v-uni-view",{staticClass:"inputs"},[e("v-uni-text",{staticClass:"lo_text"},[t._v("ID号:")]),e("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",placeholder:"请输入账号"},model:{value:t.account,callback:function(n){t.account=n},expression:"account"}})],1),e("v-uni-view",{staticClass:"inputs"},[e("v-uni-text",{staticClass:"lo_text"},[t._v("密码:")]),e("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}})],1),e("v-uni-view",{staticClass:"lo_btn"},[e("v-uni-button",{staticClass:"login",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.bindLogin.apply(void 0,arguments)}}},[t._v("登录")])],1),e("v-uni-view",{staticClass:"action-row"},[e("v-uni-navigator",{attrs:{url:"/pages/user/reg"}},[t._v("注册账号")]),e("v-uni-navigator",{attrs:{url:"/pages/user/pwd"}},[t._v("忘记密码")])],1),t.hasProvider?e("v-uni-view",{staticClass:"oauth-row",style:{top:t.positionTop+"px"}},t._l(t.providerList,function(n){return e("v-uni-view",{key:n.value,staticClass:"oauth-image"},[e("v-uni-image",{staticClass:"imgs",attrs:{src:n.image},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oauth(n.value)}}})],1)}),1):t._e()],1)},a=[];e.d(n,"b",function(){return o}),e.d(n,"c",function(){return a}),e.d(n,"a",function(){return i})},7153:function(t,n,e){var i=e("3ac2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("6b6a50b3",i,!0,{sourceMap:!1,shadowMode:!1})},"936f":function(t,n,e){var i=e("0170");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("1be5ad76",i,!0,{sourceMap:!1,shadowMode:!1})},"9b7c":function(t,n,e){"use strict";var i=e("7153"),o=e.n(i);o.a},a149:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("c5f6");var i={props:{type:String,color:String,size:{type:[Number,String],default:24}},computed:{fontSize:function(){var t=Number(this.size);return t=isNaN(t)?24:t,"".concat(t,"px")}},methods:{onClick:function(){this.$emit("click")}}};n.default=i},ad20:function(t,n,e){"use strict";var i=e("936f"),o=e.n(i);o.a},c05e:function(t,n,e){"use strict";e.r(n);var i=e("a149"),o=e.n(i);for(var a in i)"default"!==a&&function(t){e.d(n,t,function(){return i[t]})}(a);n["default"]=o.a},dd1d:function(t,n,e){"use strict";e.r(n);var i=e("6c75"),o=e("4b2a");for(var a in o)"default"!==a&&function(t){e.d(n,t,function(){return o[t]})}(a);e("9b7c");var r,s=e("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"e89fe4ba",null,!1,i["a"],r);n["default"]=c.exports},f60d:function(t,n,e){"use strict";var i,o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-rich-text",{staticClass:"iconfont",style:{color:t.color,"font-size":t.fontSize},attrs:{nodes:t.type},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.onClick()}}})},a=[];e.d(n,"b",function(){return o}),e.d(n,"c",function(){return a}),e.d(n,"a",function(){return i})},ffad:function(t,n,e){"use strict";e.r(n);var i=e("f60d"),o=e("c05e");for(var a in o)"default"!==a&&function(t){e.d(n,t,function(){return o[t]})}(a);e("ad20");var r,s=e("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"7649ce2c",null,!1,i["a"],r);n["default"]=c.exports}}]);