(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{1078:function(t,e,n){"use strict";n.r(e);var i=n("805e"),o=n("4a8e");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("b2b5");var s=n("2877"),r=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"fbedfa5e",null);e["default"]=r.exports},"1ab8":function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("f499")),a="USERS_KEY",s=function(){var t="";return t=uni.getStorageSync(a),t||(t="[]"),JSON.parse(t)},r=function(t){var e=s();e.push({account:t.account,password:t.password}),uni.setStorageSync(a,(0,o.default)(e))},c={getUsers:s,addUser:r};e.default=c},"2b24":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"todo"},[n("v-uni-view",{staticClass:"lo_hd"},[n("Icon",{attrs:{type:"&#xe74d;",size:"50",color:"#00355f"}})],1),n("v-uni-view",{staticClass:"inputs"},[n("v-uni-text",{staticClass:"lo_text"},[t._v("ID号:")]),n("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",placeholder:"请输入账号"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),n("v-uni-view",{staticClass:"inputs"},[n("v-uni-text",{staticClass:"lo_text"},[t._v("密码:")]),n("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-uni-view",{staticClass:"lo_btn"},[n("v-uni-button",{staticClass:"login",on:{click:function(e){e=t.$handleEvent(e),t.bindLogin(e)}}},[t._v("登录")])],1),n("v-uni-view",{staticClass:"action-row"},[n("v-uni-navigator",{attrs:{url:"/pages/user/reg"}},[t._v("注册账号")]),n("v-uni-navigator",{attrs:{url:"/pages/user/pwd"}},[t._v("忘记密码")])],1),t.hasProvider?n("v-uni-view",{staticClass:"oauth-row",style:{top:t.positionTop+"px"}},t._l(t.providerList,function(e){return n("v-uni-view",{key:e.value,staticClass:"oauth-image"},[n("v-uni-image",{staticClass:"imgs",attrs:{src:e.image},on:{click:function(n){n=t.$handleEvent(n),t.oauth(e.value)}}})],1)}),1):t._e()],1)},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"2ef2":function(t,e,n){var i=n("d5c4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("074de365",i,!0,{sourceMap:!1,shadowMode:!1})},4432:function(t,e,n){"use strict";n.r(e);var i=n("2b24"),o=n("b72d");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("fd87");var s=n("2877"),r=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"87638d7e",null);e["default"]=r.exports},"4a8e":function(t,e,n){"use strict";n.r(e);var i=n("96af"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"805e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-rich-text",{staticClass:"iconfont",style:{color:t.color,"font-size":t.fontSize},attrs:{nodes:t.type},on:{click:function(e){e=t.$handleEvent(e),t.onClick()}}})},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"96af":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var i={props:{type:String,color:String,size:{type:[Number,String],default:24}},computed:{fontSize:function(){var t=Number(this.size);return t=isNaN(t)?24:t,"".concat(t,"px")}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},a437:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".iconfont[data-v-87638d7e]{color:#00355f}.imgs[data-v-87638d7e]{width:60%;height:60%}.todo[data-v-87638d7e]{width:100%;height:100%;background:#ffdcf7}.todo .lo_hd[data-v-87638d7e]{text-align:center;padding-top:%?200?%}.todo .login[data-v-87638d7e]{background:#a990cc;color:#00355f}.todo .inputs[data-v-87638d7e]{margin:%?30?% %?60?%;margin-top:%?50?%;border-bottom:%?1?% solid #00355f;color:#00355f;padding-bottom:%?20?%}.todo .lo_btn[data-v-87638d7e]{margin:%?30?% %?60?%;margin-top:%?70?%}.todo .lo_text[data-v-87638d7e]{font-size:%?30?%;display:inline-block;line-height:%?80?%}.todo .input_end[data-v-87638d7e]{display:inline-block;line-height:%?80?%;height:%?80?%;vertical-align:top;padding-left:%?20?%}.oauth-row[data-v-87638d7e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-87638d7e]{width:%?100?%;height:%?100?%;border-radius:%?100?%;margin:0 %?40?%;border:1px solid #00355f;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:#477497}.action-row[data-v-87638d7e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 %?40?%;color:#00355f;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}",""])},b2b5:function(t,e,n){"use strict";var i=n("2ef2"),o=n.n(i);o.a},b4f4:function(t,e,n){var i=n("a437");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("c73ba1da",i,!0,{sourceMap:!1,shadowMode:!1})},b72d:function(t,e,n){"use strict";n.r(e);var i=n("cabd"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},cabd:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("f499")),a=i(n("cebc")),s=i(n("1078")),r=i(n("1ab8")),c=n("2f62"),u={components:{Icon:s.default},data:function(){return{providerList:[],hasProvider:!0,account:"",password:"",positionTop:0}},computed:(0,c.mapState)(["forcedLogin"]),methods:(0,a.default)({},(0,c.mapMutations)(["login","addCity"]),{initProvider:function(){var t=this,e=["weixin","qq","sinaweibo"];uni.getProvider({service:"oauth",success:function(n){if(n.provider&&n.provider.length){for(var i=0;i<n.provider.length;i++)~e.indexOf(n.provider[i])&&t.providerList.push({value:n.provider[i],image:"/static/img/"+n.provider[i]+".png"});t.hasProvider=!0}},fail:function(t){console.error("获取服务供应商失败："+(0,o.default)(t))}})},initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},bindLogin:function(){if(this.account.length<5)uni.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)uni.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t={account:this.account,password:this.password},e=r.default.getUsers().some(function(e){return t.account===e.account&&t.password===e.password});e?this.toMain(this.account):uni.showToast({icon:"none",title:"用户账号或密码不正确"})}},oauth:function(t){var e=this;uni.login({provider:t,success:function(n){uni.getUserInfo({provider:t,success:function(t){e.toMain(t.userInfo.nickName),"undefined"!=typeof t.userInfo.status?e.addCity(t.userInfo.status.annotations[0].place.title):e.addCity(t.userInfo.city)}})},fail:function(t){console.error("授权登录失败："+(0,o.default)(t))}})},toMain:function(t){this.login(t),this.forcedLogin?uni.reLaunch({url:"../main/main"}):uni.navigateBack()}}),onReady:function(){this.initPosition(),this.initProvider()}};e.default=u},d5c4:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@font-face{font-family:iconfont;\n  /* project id 1278045 */src:url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.eot);src:url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.eot#iefix) format("embedded-opentype"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.woff2) format("woff2"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.woff) format("woff"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.ttf) format("truetype"),url(https://at.alicdn.com/t/font_1278045_6ni49wgrevn.svg#iconfont) format("svg")}.iconfont[data-v-fbedfa5e]{font-family:iconfont!important;font-size:16px;font-style:normal;display:inline-block;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}',""])},fd87:function(t,e,n){"use strict";var i=n("b4f4"),o=n.n(i);o.a}}]);