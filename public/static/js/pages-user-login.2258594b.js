(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"28ef":function(t,i,e){"use strict";var n=e("f1d6"),o=e.n(n);o.a},"2b19":function(t,i,e){"use strict";var n,o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"todo"},[e("v-uni-view",{staticClass:"lo_hd"},[e("Icon",{attrs:{type:"&#xe74d;",size:"50",color:"#00355f"}})],1),e("v-uni-view",{staticClass:"inputs"},[e("v-uni-text",{staticClass:"lo_text"},[t._v("ID号:")]),e("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",placeholder:"请输入账号"},model:{value:t.account,callback:function(i){t.account=i},expression:"account"}})],1),e("v-uni-view",{staticClass:"inputs"},[e("v-uni-text",{staticClass:"lo_text"},[t._v("密码:")]),e("v-uni-input",{staticClass:"input_end",attrs:{"placeholder-style":"color:#00355f",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(i){t.password=i},expression:"password"}})],1),e("v-uni-view",{staticClass:"lo_btn"},[e("v-uni-button",{staticClass:"login",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.bindLogin.apply(void 0,arguments)}}},[t._v("登录")])],1),e("v-uni-view",{staticClass:"action-row"},[e("v-uni-navigator",{attrs:{url:"/pages/user/reg"}},[t._v("注册账号")]),e("v-uni-navigator",{attrs:{url:"/pages/user/pwd"}},[t._v("忘记密码")])],1),t.hasProvider?e("v-uni-view",{staticClass:"oauth-row",style:{top:t.positionTop+"px"}},t._l(t.providerList,function(i){return e("v-uni-view",{key:i.value,staticClass:"oauth-image"},[e("v-uni-image",{staticClass:"imgs",attrs:{src:i.image},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oauth(i.value)}}})],1)}),1):t._e()],1)},a=[];e.d(i,"b",function(){return o}),e.d(i,"c",function(){return a}),e.d(i,"a",function(){return n})},"404b":function(t,i,e){"use strict";var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("f499")),a=n(e("cebc")),s=n(e("6192")),r=e("2f62"),c={data:function(){return{providerList:[],hasProvider:!0,account:"",password:"",positionTop:0}},methods:(0,a.default)({},(0,r.mapMutations)("user",["login","addCity"]),{initProvider:function(){var t=this,i=["weixin","qq","sinaweibo"];uni.getProvider({service:"oauth",success:function(e){if(e.provider&&e.provider.length){for(var n=0;n<e.provider.length;n++)~i.indexOf(e.provider[n])&&t.providerList.push({value:e.provider[n],image:"/static/img/"+e.provider[n]+".png"});t.hasProvider=!0}},fail:function(t){console.error("获取服务供应商失败："+(0,o.default)(t))}})},initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},bindLogin:function(){if(this.account.length<5)uni.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)uni.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t={account:this.account,password:this.password},i=s.default.getUsers().some(function(i){return t.account===i.account&&t.password===i.password});i?this.toMain(this.account):uni.showToast({icon:"none",title:"用户账号或密码不正确"})}},oauth:function(t){var i=this;uni.login({provider:t,success:function(e){uni.getUserInfo({provider:t,success:function(t){i.toMain(t.userInfo.nickName),"undefined"!=typeof t.userInfo.status?i.addCity(t.userInfo.status.annotations[0].place.title):i.addCity(t.userInfo.city)}})},fail:function(t){console.error("授权登录失败："+(0,o.default)(t))}})},toMain:function(t){this.login(t),uni.navigateBack()}}),onReady:function(){this.initPosition(),this.initProvider()}};i.default=c},"4b2a":function(t,i,e){"use strict";e.r(i);var n=e("404b"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=o.a},6192:function(t,i,e){"use strict";var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("f499")),a="USERS_KEY",s=function(){var t="";return t=uni.getStorageSync(a),t||(t="[]"),JSON.parse(t)},r=function(t){var i=s();i.push({account:t.account,password:t.password}),uni.setStorageSync(a,(0,o.default)(i))},c={getUsers:s,addUser:r};i.default=c},b894:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".iconfont[data-v-01017343]{color:#00355f}.imgs[data-v-01017343]{width:60%;height:60%}.todo[data-v-01017343]{width:100%;height:100%;background:#ffdcf7}.todo .lo_hd[data-v-01017343]{text-align:center;padding-top:%?200?%}.todo .login[data-v-01017343]{background:#a990cc;color:#00355f}.todo .inputs[data-v-01017343]{margin:%?30?% %?60?%;margin-top:%?50?%;border-bottom:%?1?% solid #00355f;color:#00355f;padding-bottom:%?20?%}.todo .lo_btn[data-v-01017343]{margin:%?30?% %?60?%;margin-top:%?70?%}.todo .lo_text[data-v-01017343]{font-size:%?30?%;display:inline-block;line-height:%?80?%}.todo .input_end[data-v-01017343]{display:inline-block;line-height:%?80?%;height:%?80?%;vertical-align:top;padding-left:%?20?%}.oauth-row[data-v-01017343]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-01017343]{width:%?100?%;height:%?100?%;border-radius:%?100?%;margin:0 %?40?%;border:1px solid #00355f;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#477497}.action-row[data-v-01017343]{display:-webkit-box;display:-webkit-flex;display:flex;margin:0 %?40?%;color:#00355f;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}",""])},dd1d:function(t,i,e){"use strict";e.r(i);var n=e("2b19"),o=e("4b2a");for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);e("28ef");var s,r=e("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"01017343",null,!1,n["a"],s);i["default"]=c.exports},f1d6:function(t,i,e){var n=e("b894");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("c9d27438",n,!0,{sourceMap:!1,shadowMode:!1})}}]);